<?xml version="1.0" encoding="utf-8"?>
<odoo auto_sequence="1">
    <record id="financial_report_es_profit_and_loss" model="account.report">
        <field name="name">Pèrdues i Guanys</field>
        <field name="root_report_id" ref="account_reports.profit_and_loss"/>
        <field name="filter_date_range" eval="True"/>
        <field name="filter_analytic_groupby" eval="True"/>
        <field name="filter_unfold_all" eval="True"/>
        <field name="filter_journals" eval="False"/>
        <field name="country_id" ref="base.ad"/>
        <field name="filter_multi_company">selector</field>
        <field name="column_ids">
            <record id="financial_report_es_profit_and_loss_column" model="account.report.column">
                <field name="name">Saldo</field>
                <field name="expression_label">balance</field>
            </record>
        </field>
        <field name="line_ids">

            <!-- INGRESSOS D'EXPLOTACIÓ -->
            <record id="ad_ingressos_explotacio" model="account.report.line">
                <field name="name">Ingressos d'Explotació</field>
                <field name="code">ad_ingressos_explotacio</field>
                <field name="hierarchy_level">1</field>
                <field name="expression_ids">
                    <record id="ad_ingressos_explotacio_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">aggregation</field>
                        <field name="formula">es_profit_and_loss_line_1.balance + es_profit_and_loss_line_2.balance + es_profit_and_loss_line_3.balance + es_profit_and_loss_line_5.balance + es_profit_and_loss_line_9.balance</field>
                    </record>
                </field>
                <field name="children_ids"> 
                    <record id="es_profit_and_loss_line_1" model="account.report.line">
                        <field name="name">Import net de la xifra de negoci</field>
                        <field name="code">es_profit_and_loss_line_1</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_1_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">-701 - 706 - 700 - 709 - 702 - 705 - 703 - 704 - 708</field>
                            </record>
                        </field>
                    </record>
                    <record id="es_profit_and_loss_line_2" model="account.report.line">
                        <field name="name">Variació d'existències de productes acabats i en curs de fabricació </field>
                        <field name="code">es_profit_and_loss_line_2</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_2_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">-71 - 693 - 793</field>
                            </record>
                        </field>
                    </record>
                    <record id="es_profit_and_loss_line_3" model="account.report.line">
                        <field name="name">Treballs realitzats per l'empresari al seu immobilitzat</field>
                        <field name="code">es_profit_and_loss_line_3</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_3_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">-73</field>
                            </record>
                        </field>
                    </record>
                    <record id="es_profit_and_loss_line_5" model="account.report.line">
                        <field name="name">Other operating income</field>
                        <field name="code">es_profit_and_loss_line_5</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_5_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 74 - 75</field>
                            </record>
                        </field>
                    </record>
                    <record id="es_profit_and_loss_line_9" model="account.report.line">
                        <field name="name">Subvencions</field>
                        <field name="code">es_profit_and_loss_line_9</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_9_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">domain</field>
                                <field name="formula" eval="[('account_id.code','=like','74%'), ('account_id.code','not like','7461%')]"/>
                                <field name="subformula">-sum</field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>
            
            <!-- DESPESES D'EXPLOTACIÓ -->
            <record id="ad_despeses_explotacio" model="account.report.line">
                <field name="name">Despeses d'Explotació</field>
                <field name="code">ad_despeses_explotacio</field>
                <field name="hierarchy_level">1</field>
                <field name="expression_ids">
                    <record id="ad_despeses_explotacio_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">aggregation</field>
                        <field name="formula">ad_despeses_explotacio_consum.balance + ad_despeses_explotacio_personal.balance
                            + ad_despeses_explotacio_amortitzacio.balance + ad_pl_47.balance + ad_despeses_explotacio_altres.balance
                        </field>
                    </record>
                </field>
                <field name="children_ids">
                    <record id="ad_despeses_explotacio_consum" model="account.report.line">
                        <field name="name">Consum de mercaderies, matèries primeres i altres materials</field>
                        <field name="code">ad_despeses_explotacio_consum</field>
                        <field name="hierarchy_level">2</field>
                        <field name="expression_ids">
                            <record id="ad_despeses_explotacio_consum_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">aggregation</field>
                                <field name="formula">es_profit_and_loss_line_4.balance + es_profit_and_loss_line_10.balance</field>
                            </record>
                        </field>
                        <field name="children_ids">
                            <record id="es_profit_and_loss_line_4" model="account.report.line">
                                <field name="name">Consum de mercaderies</field>
                                <field name="code">es_profit_and_loss_line_4</field>
                                <field name="groupby">account_id</field>
                                <field name="foldable" eval="True"/>
                                <field name="expression_ids">
                                    <record id="es_profit_and_loss_line_4_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">account_codes</field>
                                        <field name="formula">- 600 - 610</field>
                                    </record>
                                </field>
                            </record>
                            <record id="es_profit_and_loss_line_10" model="account.report.line">
                                <field name="name">Consum de materies primes i altres aprovisionaments</field>
                                <field name="code">es_profit_and_loss_line_10</field>
                                <field name="groupby">account_id</field>
                                <field name="foldable" eval="True"/>
                                <field name="expression_ids">
                                    <record id="es_profit_and_loss_line_10_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">account_codes</field>
                                        <field name="formula">- 601 - 602 - 606 - 607 -608 - 609 - 611 - 612</field>
                                    </record>
                                </field>
                            </record>
                        </field>
                    </record>

                    <record id="ad_despeses_explotacio_personal" model="account.report.line">
                        <field name="name">Despeses de personal</field>
                        <field name="code">ad_despeses_explotacio_personal</field>
                        <field name="hierarchy_level">2</field>
                        <field name="expression_ids">
                            <record id="ad_despeses_explotacio_personal_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">aggregation</field>
                                <field name="formula">ad_pl_35.balance + ad_pl_38.balance + ad_pl_40.balance</field>
                            </record>
                        </field>
                        <field name="children_ids">
                            <record id="ad_pl_35" model="account.report.line">
                                <field name="name">Sous i salaris i assimilats</field>
                                <field name="code">ad_pl_35</field>
                                <field name="groupby">account_id</field>
                                <field name="foldable" eval="True"/>
                                <field name="expression_ids">
                                    <record id="ad_pl_35_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">account_codes</field>
                                        <field name="formula">- 640 - 644 - 641</field>
                                    </record>
                                </field>
                            </record>
                            <record id="ad_pl_38" model="account.report.line">
                                <field name="name">Càrregues socials</field>
                                <field name="code">ad_pl_38</field>
                                <field name="groupby">account_id</field>
                                <field name="foldable" eval="True"/>
                                <field name="expression_ids">
                                    <record id="ad_pl_38_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">account_codes</field>
                                        <field name="formula">- 642</field>
                                    </record>
                                </field>
                            </record>
                            <record id="ad_pl_40" model="account.report.line">
                                <field name="name">Altres despeses de personal</field>
                                <field name="code">ad_pl_40</field>
                                <field name="groupby">account_id</field>
                                <field name="foldable" eval="True"/>
                                <field name="expression_ids">
                                    <record id="ad_pl_40_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">account_codes</field>
                                        <field name="formula">- 649 - 643</field>
                                    </record>
                                </field>
                            </record>
                        </field>
                    </record> 

                    <record id="ad_despeses_explotacio_amortitzacio" model="account.report.line">
                        <field name="name">Amortització, deteriorament i resultats per venda o baixa de l'immobilitzat intangible i de l'immobilitzat tangible</field>
                        <field name="code">ad_despeses_explotacio_amortitzacio</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_despeses_explotacio_amortitzacio_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 68 - 67 - 69 - 79 - 77</field>
                            </record>
                        </field>
                    </record>
                    
                    <record id="ad_pl_47" model="account.report.line">
                        <field name="name">Deteriorament del circulant</field>
                        <field name="code">ad_pl_47</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_47_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 65 - 794 - 795 - 694</field>
                            </record>
                        </field>
                    </record>

                    <record id="ad_despeses_explotacio_altres" model="account.report.line">
                        <field name="name">Altres despeses d'explotació</field>
                        <field name="code">ad_despeses_explotacio_altres</field>
                        <field name="hierarchy_level">2</field>
                        <field name="expression_ids">
                            <record id="ad_despeses_explotacio_altres_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">aggregation</field>
                                <field name="formula">ad_pl_53.balance + ad_pl_56.balance + ad_pl_59.balance + ad_pl_62.balance + ad_pl_65.balance + ad_pl_se.balance</field>
                            </record>
                        </field>
                        <field name="children_ids">
                            <record id="ad_pl_53" model="account.report.line">
                                <field name="name">Arrendaments i cànons</field>
                                <field name="code">ad_pl_53</field>
                                <field name="groupby">account_id</field>
                                <field name="foldable" eval="True"/>
                                <field name="expression_ids">
                                    <record id="ad_pl_53_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">account_codes</field>
                                        <field name="formula">- 621</field>
                                    </record>
                                </field>
                            </record>
                            <record id="ad_pl_56" model="account.report.line">
                                <field name="name">Reparacions i conservació</field>
                                <field name="code">ad_pl_56</field>
                                <field name="groupby">account_id</field>
                                <field name="foldable" eval="True"/>
                                <field name="expression_ids">
                                    <record id="ad_pl_56_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">account_codes</field>
                                        <field name="formula">- 622</field>
                                    </record>
                                </field>
                            </record>
                            <record id="ad_pl_59" model="account.report.line">
                                <field name="name">Serveis professionals independents</field>
                                <field name="code">ad_pl_59</field>
                                <field name="groupby">account_id</field>
                                <field name="foldable" eval="True"/>
                                <field name="expression_ids">
                                    <record id="ad_pl_59_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">account_codes</field>
                                        <field name="formula">- 623</field>
                                    </record>
                                </field>
                            </record>
                            <record id="ad_pl_62" model="account.report.line">
                                <field name="name">Subministraments</field>
                                <field name="code">ad_pl_62</field>
                                <field name="groupby">account_id</field>
                                <field name="foldable" eval="True"/>
                                <field name="expression_ids">
                                    <record id="ad_pl_62_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">account_codes</field>
                                        <field name="formula">- 628</field>
                                    </record>
                                </field>
                            </record>
                            <record id="ad_pl_65" model="account.report.line">
                                <field name="name">Tributs</field>
                                <field name="code">ad_pl_65</field>
                                <field name="groupby">account_id</field>
                                <field name="foldable" eval="True"/>
                                <field name="expression_ids">
                                    <record id="ad_pl_65_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">account_codes</field>
                                        <field name="formula">- 631</field>
                                    </record>
                                </field>
                            </record>
                            <record id="ad_pl_se" model="account.report.line">
                                <field name="name">Altres serveis exteriors</field>
                                <field name="code">ad_pl_se</field>
                                <field name="groupby">account_id</field>
                                <field name="foldable" eval="True"/>
                                <field name="expression_ids">
                                    <record id="ad_pl_se_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">account_codes</field>
                                        <field name="formula">- 625 - 626 - 627 - 629 - 624</field>
                                    </record>
                                </field>
                            </record>
                        </field>
                    </record> 
                </field>
            </record>

            <!-- RESULTAT D'EXPLOTACIÓ -->
            <record id="ad_resultat_explotacio" model="account.report.line">
                <field name="name">RESULTAT D'EXPLOTACIÓ</field>
                <field name="code">ad_resultat_explotacio</field>
                <field name="hierarchy_level">0</field>
                <field name="expression_ids">
                    <record id="ad_resultat_explotacio_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">aggregation</field>
                        <field name="formula">ad_ingressos_explotacio.balance + ad_despeses_explotacio.balance</field>
                    </record>
                </field>
            </record>

            <!-- INGRESSOS I DESPESES FINANCERES -->
            <record id="ad_financeres" model="account.report.line">
                <field name="name">Ingressos i despeses financeres</field>
                <field name="code">ad_financeres</field>
                <field name="hierarchy_level">1</field>
                <field name="expression_ids">
                    <record id="ad_financeres_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">aggregation</field>
                        <field name="formula">ad_pl_74.balance + ad_pl_77.balance + ad_pl_80.balance + ad_pl_83.balance + ad_pl_86.balance </field>
                    </record>
                </field>
                <field name="children_ids">
                    <record id="ad_pl_74" model="account.report.line">
                        <field name="name">Ingressos financers</field>
                        <field name="code">ad_pl_74</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_74_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 760 - 761 - 762 - 769</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_77" model="account.report.line">
                        <field name="name">Despeses financeres</field>
                        <field name="code">ad_pl_77</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_77_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 660 - 661 - 662 - 664 - 665 - 669</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_80" model="account.report.line">
                        <field name="name">Variació de valor raonable en instruments financers de negociació</field>
                        <field name="code">ad_pl_80</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_80_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 663 - 763</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_83" model="account.report.line">
                        <field name="name">Difrencies de canvi</field>
                        <field name="code">ad_pl_83</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_83_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 668 - 768</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_86" model="account.report.line">
                        <field name="name">Deteriorament i resultats per venda o baixa d'actius financers</field>
                        <field name="code">ad_pl_86</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_86_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 666 - 667 - 673 - 675 - 696 - 697 - 698 - 699 - 766 - 773 - 775 - 796 - 797 - 798 - 799</field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>

            <!-- RESULTAT FINANCER -->
            <record id="ad_resultat_financer" model="account.report.line">
                <field name="name">RESULTAT FINANCER</field>
                <field name="code">ad_resultat_financer</field>
                <field name="hierarchy_level">0</field>
                <field name="expression_ids">
                    <record id="ad_resultat_financer_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">aggregation</field>
                        <field name="formula">ad_financeres.balance</field>
                    </record>
                </field>
            </record>

            <!-- RESULTAT DE LES OPERACIONS -->
            <record id="es_profit_and_loss_line_sum_c" model="account.report.line">
                <field name="name">RESULTAT DE LES OPERACIONS</field>
                <field name="code">es_profit_and_loss_sum_c</field>
                <field name="hierarchy_level">0</field>
                <field name="expression_ids">
                    <record id="es_profit_and_loss_line_sum_c_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">aggregation</field>
                        <field name="formula">ad_resultat_explotacio.balance + ad_resultat_financer.balance</field>
                    </record>
                </field>
            </record>

            <!-- ALTRES INGRESSOS I DESPESES NO CURRENTS -->
            <record id="ad_no_currents" model="account.report.line">
                <field name="name">Altres ingressos i despeses no currents</field>
                <field name="hierarchy_level">1</field>
                <field name="code">ad_no_currents</field>
                <field name="expression_ids">
                    <record id="ad_no_currents_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">aggregation</field>
                        <field name="formula">es_profit_and_loss_sum_c.balance + ad_pl_98.balance + ad_pl_101.balance</field>
                    </record>
                </field>
                <field name="children_ids">
                    <record id="ad_pl_98" model="account.report.line">
                        <field name="name">Altres ingresos no recurrents</field>
                        <field name="code">ad_pl_98</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_98_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 778</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_101" model="account.report.line">
                        <field name="name">Altres despeses no recurrents</field>
                        <field name="code">ad_pl_101</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_101_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 678</field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>

            <!-- RESULTAT ABANS D'IMPOSTOS -->
            <record id="ad_resultat_abans_impostos" model="account.report.line">
                <field name="name">RESULTAT ABANS D'IMPOSTOS</field>
                <field name="hierarchy_level">0</field>
                <field name="code">ad_resultat_abans_impostos</field>
                <field name="expression_ids">
                    <record id="ad_resultat_abans_impostos_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">aggregation</field>
                        <field name="formula">ad_no_currents.balance</field>
                    </record>
                </field>
            </record>


            <!-- IMPOST SOBRE BENEFICIS -->
            <record id="ad_impost_beneficis" model="account.report.line">
                <field name="name">Impost sobre beneficis</field>
                <field name="hierarchy_level">1</field>
                <field name="code">ad_impost_beneficis</field>
                <field name="expression_ids">
                    <record id="ad_impost_beneficis_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">account_codes</field>
                        <field name="formula">- 630</field>
                    </record>
                </field>
            </record>

            <!-- RESULTAT DE L'EXERCICI -->
            <record id="ad_pl_year_line_sum" model="account.report.line">
                <field name="name">RESULTAT DE L'EXERCICI</field>
                <field name="hierarchy_level">0</field>
                <field name="code">ad_pl_year_sum</field>
                <field name="expression_ids">
                    <record id="ad_pl_year_line_sum_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">aggregation</field>
                        <field name="formula">es_profit_and_loss_sum_d.balance + ad_pl_107.balance</field>
                    </record>
                </field>
            </record>

        </field>
    </record>
</odoo>