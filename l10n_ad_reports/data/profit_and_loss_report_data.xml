<?xml version="1.0" encoding="utf-8"?>
<odoo auto_sequence="1">
    <record id="financial_report_es_profit_and_loss" model="account.report">
        <field name="name">Pèrdues i Guanys</field>
        <field name="root_report_id" ref="account_reports.profit_and_loss"/>
        <field name="filter_date_range" eval="True"/>
        <field name="filter_analytic_groupby" eval="True"/>
        <field name="filter_unfold_all" eval="True"/>
        <field name="filter_journals" eval="False"/>
        <field name="country_id" ref="base.ad"/>
        <field name="filter_multi_company">selector</field>
        <field name="column_ids">
            <record id="financial_report_es_profit_and_loss_column" model="account.report.column">
                <field name="name">Saldo</field>
                <field name="expression_label">balance</field>
            </record>
        </field>
        <field name="line_ids">

            <!-- RESULTAT D'EXPLOTACIÓ -->
            <record id="es_profit_and_loss_line_sum_a" model="account.report.line">
                <field name="name">A) RESULTAT D'EXPLOTACIÓ</field>
                <field name="code">es_profit_and_loss_sum_a</field>
                <field name="hierarchy_level">0</field>
                <field name="expression_ids">
                    <record id="es_profit_and_loss_line_sum_a_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">aggregation</field>
                        <field name="formula">es_profit_and_loss_line_1.balance + es_profit_and_loss_line_2.balance + es_profit_and_loss_line_3.balance + es_profit_and_loss_line_5.balance + es_profit_and_loss_line_9.balance
                            + es_profit_and_loss_line_4.balance + es_profit_and_loss_line_10.balance + es_profit_and_loss_line_6.balance + es_profit_and_loss_line_8.balance
                            + ad_pl_38.balance + ad_pl_40.balance + ad_pl_47.balance + ad_pl_53.balance + ad_pl_56.balance + ad_pl_59.balance + ad_pl_62.balance + ad_pl_65.balance + ad_pl_se.balance
                        </field>
                    </record>
                </field>
                <field name="children_ids">

                    <!-- INGRESSOS D'EXPLOTACIÓ -->
                    <record id="es_profit_and_loss_line_1" model="account.report.line">
                        <field name="name">Import net de la xifra de negoci</field>
                        <field name="code">es_profit_and_loss_line_1</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_1_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">-701 - 706 - 700 - 709 - 702 - 705 - 703 - 704 - 708</field>
                            </record>
                        </field>
                    </record>
                    <record id="es_profit_and_loss_line_2" model="account.report.line">
                        <field name="name">Variació d'existències de productes acabats i en curs de fabricació </field>
                        <field name="code">es_profit_and_loss_line_2</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_2_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">-71 - 693 - 793</field>
                            </record>
                        </field>
                    </record>
                    <record id="es_profit_and_loss_line_3" model="account.report.line">
                        <field name="name">Treballs realitzats per l'empresari al seu immobilitzat</field>
                        <field name="code">es_profit_and_loss_line_3</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_3_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">-73</field>
                            </record>
                        </field>
                    </record>
                    <record id="es_profit_and_loss_line_5" model="account.report.line">
                        <field name="name">Other operating income</field>
                        <field name="code">es_profit_and_loss_line_5</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_5_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 74 - 75</field>
                            </record>
                        </field>
                    </record>
                    <record id="es_profit_and_loss_line_9" model="account.report.line">
                        <field name="name">Subvencions</field>
                        <field name="code">es_profit_and_loss_line_9</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_9_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">domain</field>
                                <field name="formula" eval="[('account_id.code','=like','74%'), ('account_id.code','not like','7461%')]"/>
                                <field name="subformula">-sum</field>
                            </record>
                        </field>
                    </record>

                    <!-- DESPESES D'EXPLOTACIÓ -->
                    <record id="es_profit_and_loss_line_4" model="account.report.line">
                        <field name="name">Consum de mercaderies</field>
                        <field name="code">es_profit_and_loss_line_4</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_4_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 600 - 610</field>
                            </record>
                        </field>
                    </record>
                    <record id="es_profit_and_loss_line_10" model="account.report.line">
                        <field name="name">Consum de materies primes i altres aprovisionaments</field>
                        <field name="code">es_profit_and_loss_line_10</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_10_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 601 - 602 - 606 - 607 -608 - 609 - 611 - 612</field>
                            </record>
                        </field>
                    </record>
                    <record id="es_profit_and_loss_line_6" model="account.report.line">
                        <field name="name">Sous i salaris i assimilats</field>
                        <field name="code">es_profit_and_loss_line_6</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_6_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 640 - 644 - 641</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_38" model="account.report.line">
                        <field name="name">Càrregues socials</field>
                        <field name="code">ad_pl_38</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_38_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 642</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_40" model="account.report.line">
                        <field name="name">Altres despeses de personal</field>
                        <field name="code">ad_pl_40</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_40_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 649 - 643</field>
                            </record>
                        </field>
                    </record>
                    <record id="es_profit_and_loss_line_8" model="account.report.line">
                        <field name="name">Amortització, deteriorament i resultats per venda o baixa de l'immobilitzat intangible i de l'immobilitzat tangible</field>
                        <field name="code">es_profit_and_loss_line_8</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_8_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 68 - 67 - 69 - 79 - 77</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_47" model="account.report.line">
                        <field name="name">Deteriorament del circulant</field>
                        <field name="code">ad_pl_47</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_47_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 65 - 794 - 795</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_53" model="account.report.line">
                        <field name="name">Arrendaments i cànons</field>
                        <field name="code">ad_pl_53</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_53_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 621</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_56" model="account.report.line">
                        <field name="name">Reparacions i conservació</field>
                        <field name="code">ad_pl_56</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_56_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 622</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_59" model="account.report.line">
                        <field name="name">Serveis professionals independents</field>
                        <field name="code">ad_pl_59</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_59_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 623</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_62" model="account.report.line">
                        <field name="name">Subministraments</field>
                        <field name="code">ad_pl_62</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_62_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 628</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_65" model="account.report.line">
                        <field name="name">Tributs</field>
                        <field name="code">ad_pl_65</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_65_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 631</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_se" model="account.report.line">
                        <field name="name">Altres serveis exteriors</field>
                        <field name="code">ad_pl_se</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_se_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 625 - 626 - 627 - 629</field>
                            </record>
                        </field>
                    </record>

                </field>
            </record>

            <!-- RESULTAT FINANCER -->
            <record id="es_profit_and_loss_line_sum_b" model="account.report.line">
                <field name="name">B) RESULTAT FINANCER</field>
                <field name="code">es_profit_and_loss_sum_b</field>
                <field name="hierarchy_level">0</field>
                <field name="expression_ids">
                    <record id="es_profit_and_loss_line_sum_b_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">aggregation</field>
                        <field name="formula">ad_pl_74.balance + ad_pl_77.balance + ad_pl_80.balance + ad_pl_83.balance + ad_pl_86.balance </field>
                    </record>
                </field>
                <field name="children_ids">
                    <record id="ad_pl_74" model="account.report.line">
                        <field name="name">Ingressos financers</field>
                        <field name="code">ad_pl_74</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_74_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 760 - 761 - 762 - 769</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_77" model="account.report.line">
                        <field name="name">Despeses financeres</field>
                        <field name="code">ad_pl_77</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_77_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 660 - 661 - 662 - 664 - 665 - 669</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_80" model="account.report.line">
                        <field name="name">Variació de valor raonable en instruments financers de negociació</field>
                        <field name="code">ad_pl_80</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_80_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 663 - 763</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_83" model="account.report.line">
                        <field name="name">Difrencies de canvi</field>
                        <field name="code">ad_pl_83</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_83_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 668 - 768</field>
                            </record>
                        </field>
                    </record>
                    <record id="ad_pl_86" model="account.report.line">
                        <field name="name">Deteriorament i resultats per venda o baixa d'actius financers</field>
                        <field name="code">ad_pl_86</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="ad_pl_86_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">- 666 - 667 - 673 - 675 - 696 - 697 - 698 - 699 - 766 - 773 - 775 - 796 - 797 - 798 - 799</field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>

            <!-- RESULTAT ABANS D'IMPOSTOS -->
            <record id="es_profit_and_loss_line_sum_c" model="account.report.line">
                <field name="name">C) PROFIT/LOSS BEFORE INCOME TAX (A + B)</field>
                <field name="name@es">C) RESULTADO ANTES DE IMPUESTOS (A + B)</field>
                <field name="code">es_profit_and_loss_sum_c</field>
                <field name="hierarchy_level">0</field>
                <field name="expression_ids">
                    <record id="es_profit_and_loss_line_sum_c_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">aggregation</field>
                        <field name="formula">es_profit_and_loss_sum_a.balance + es_profit_and_loss_sum_b.balance</field>
                    </record>
                </field>
            </record>
            <record id="es_profit_and_loss_line_sum_d" model="account.report.line">
                <field name="name">D) PROFIT/LOSS FOR THE PERIOD (C + 18)</field>
                <field name="name@es">D) RESULTADO DEL EJERCICIO (C + 18)</field>
                <field name="hierarchy_level">0</field>
                <field name="code">es_profit_and_loss_sum_d</field>
                <field name="expression_ids">
                    <record id="es_profit_and_loss_line_sum_d_balance" model="account.report.expression">
                        <field name="label">balance</field>
                        <field name="engine">aggregation</field>
                        <field name="formula">es_profit_and_loss_sum_c.balance + es_profit_and_loss_line_18.balance</field>
                    </record>
                </field>
                <field name="children_ids">
                    <record id="es_profit_and_loss_line_18" model="account.report.line">
                        <field name="name">18. Income tax expense</field>
                        <field name="name@es">18. Impuestos sobre beneficios.</field>
                        <field name="code">es_profit_and_loss_line_18</field>
                        <field name="groupby">account_id</field>
                        <field name="foldable" eval="True"/>
                        <field name="expression_ids">
                            <record id="es_profit_and_loss_line_18_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">account_codes</field>
                                <field name="formula">-638 - 633 - 6301 - 83 - 6300</field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>
        </field>
    </record>
</odoo>